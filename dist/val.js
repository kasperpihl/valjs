!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("val",[],n):"object"==typeof exports?exports.val=n():e.val=n()}(this,function(){return function(e){function n(t){if(r[t])return r[t].exports;var a=r[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.custom = exports.shape = exports.oneOf = exports.arrayOf = exports.any = exports.object = exports.array = exports.number = exports.func = exports.bool = exports.string = undefined;\nexports.default = val;\n\nvar _validator = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nvar _primitive = __webpack_require__(11);\n\nvar _primitive2 = _interopRequireDefault(_primitive);\n\nvar _oneOf = __webpack_require__(10);\n\nvar _oneOf2 = _interopRequireDefault(_oneOf);\n\nvar _arrayOf = __webpack_require__(8);\n\nvar _arrayOf2 = _interopRequireDefault(_arrayOf);\n\nvar _shape = __webpack_require__(12);\n\nvar _shape2 = _interopRequireDefault(_shape);\n\nvar _custom = __webpack_require__(9);\n\nvar _custom2 = _interopRequireDefault(_custom);\n\nvar _test = __webpack_require__(7);\n\nvar _test2 = _interopRequireDefault(_test);\n\nvar _min_length = __webpack_require__(6);\n\nvar _min_length2 = _interopRequireDefault(_min_length);\n\nvar _max_length = __webpack_require__(4);\n\nvar _max_length2 = _interopRequireDefault(_max_length);\n\nvar _min = __webpack_require__(5);\n\nvar _min2 = _interopRequireDefault(_min);\n\nvar _max = __webpack_require__(3);\n\nvar _max2 = _interopRequireDefault(_max);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Export primitive types\n\n\n// Import types\n// Validator essentials\nvar string = exports.string = (0, _primitive2.default)('string', [_min_length2.default, _max_length2.default, _test2.default]);\n\n// Import Extensions\nvar bool = exports.bool = (0, _primitive2.default)('boolean');\nvar func = exports.func = (0, _primitive2.default)('function', [_test2.default]);\nvar number = exports.number = (0, _primitive2.default)('number', [_min2.default, _max2.default, _test2.default]);\nvar array = exports.array = (0, _primitive2.default)('array', [_min_length2.default, _max_length2.default, _test2.default]);\nvar object = exports.object = (0, _primitive2.default)('object', [_test2.default]);\n\n// Setup non-primitive types\nvar any = exports.any = (0, _validator.TypeChecker)(function (value) {\n  return !!value;\n}, [_test2.default]);\nvar arrayOf = exports.arrayOf = (0, _arrayOf2.default)([_min_length2.default, _max_length2.default, _test2.default]);\nvar oneOf = exports.oneOf = (0, _oneOf2.default)([_test2.default]);\nvar shape = exports.shape = (0, _shape2.default)([_test2.default]);\nvar custom = exports.custom = (0, _custom2.default)();\n\nvar globalOptions = {\n  promise: false,\n  resolveOnly: false,\n  runCondition: function runCondition() {\n    return true;\n  }\n};\n\n// ======================================================\n// Main function - this is run by the user\n// ======================================================\nfunction val(obj, schema, options) {\n  var mergedOptions = Object.assign({}, globalOptions, options);\n  // Checking if run condition is set.\n  if (!mergedOptions.runCondition()) {\n    return null;\n  }\n\n  var error = void 0;\n  if ((0, _util.isValHandler)(schema)) {\n    error = (0, _validator.run)(schema, null, obj);\n  } else {\n    console.warn('valjs: invalid scheme provided');\n  }\n\n  if (mergedOptions.promise) {\n    return new Promise(function (resolve, reject) {\n      if (!mergedOptions.resolveOnly && error) {\n        return reject(error);\n      }\n      return resolve(error);\n    });\n  }\n  return error || null;\n}\n\n// Support for setting global options.\nval.setGlobal = function (key, value) {\n  globalOptions[key] = value;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 0\n// module chunks = 0\n//# sourceURL=webpack:///./src/index.js?")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar genError = exports.genError = function genError(key, error) {\n  if (error) {\n    var keyString = key ? ' key \\'' + key + '\\'' : '';\n    return 'Invalid' + keyString + ': ' + error;\n  }\n  return null;\n};\nvar isValHandler = exports.isValHandler = function isValHandler(vH) {\n  return (typeof vH === 'undefined' ? 'undefined' : _typeof(vH)) === 'object' && vH.__rootChecker;\n};\n\nvar isSymbol = function isSymbol(type, value) {\n  // Native Symbol.\n  if (type === 'symbol') {\n    return true;\n  }\n\n  // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n  if (value['@@toStringTag'] === 'Symbol') {\n    return true;\n  }\n\n  // Fallback for non-spec compliant Symbols which are polyfilled.\n  if (typeof Symbol === 'function' && value instanceof Symbol) {\n    return true;\n  }\n\n  return false;\n};\n\nvar getType = exports.getType = function getType(value) {\n  var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n  if (Array.isArray(value)) {\n    return 'array';\n  }\n  if (value instanceof RegExp) {\n    // Old webkits (at least until Android 4.0) return 'function' rather than\n    // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n    // passes PropTypes.object.\n    return 'object';\n  }\n  if (isSymbol(type, value)) {\n    return 'symbol';\n  }\n  return type;\n};\n\nvar is = exports.is = function is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    return x !== 0 || 1 / x === 1 / y;\n  }\n  // Step 6.a: NaN == NaN\n  return x !== x && y !== y;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/util.js\n// module id = 1\n// module chunks = 0\n//# sourceURL=webpack:///./src/util.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TypeChecker = exports.run = undefined;\n\nvar _util = __webpack_require__(1);\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// ======================================================\n// Helper function to run down the tree.\n// Used for recursive handling of types.\n// ======================================================\n\nvar run = exports.run = function run(object, key, value) {\n  var error = null;\n  var hasValue = typeof value !== 'undefined' && value !== null;\n  if ((0, _util.isValHandler)(object)) {\n    if (object.__required && !hasValue) {\n      error = (0, _util.genError)(key, 'required');\n    } else if (hasValue) {\n      error = object.__rootChecker(key, value);\n      if (!error) {\n        error = object.__chain.map(function (_ref) {\n          var handler = _ref.handler,\n              args = _ref.args;\n          return (0, _util.genError)(key, handler.apply(undefined, [value].concat(_toConsumableArray(args))));\n        }).filter(function (v) {\n          return !!v;\n        })[0];\n      }\n    }\n  } else {\n    return (0, _util.genError)(key, 'wrong handler in scheme');\n  }\n  return error;\n};\n\n// ======================================================\n// All Types should be an instance of this\n// Creating chainable type checker.\n// ======================================================\n\nvar TypeChecker = exports.TypeChecker = function TypeChecker(validate, extensions) {\n  // Bind require and all extensions\n  var bindAllExtensions = function bindAllExtensions(valObj) {\n    valObj.require = valObj.__orgRequire.bind(null, valObj);\n    valObj.extend = valObj.__extend.bind(null, valObj);\n    valObj.__extensions.forEach(function (ext) {\n      valObj[ext.name] = runExtension.bind(null, ext, valObj);\n    });\n  };\n\n  // Handler for when an extension get ran. Handles chaining.\n  var runExtension = function runExtension(ext, valObj) {\n    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    var name = ext.name,\n        handler = ext.handler;\n\n    valObj = Object.assign({}, valObj);\n    valObj.__chain = valObj.__chain.concat([{ name: name, handler: handler, args: args }]);\n    bindAllExtensions(valObj);\n    return valObj;\n  };\n\n  // Setting initial val object.\n  var valObj = {\n    __rootChecker: validate,\n    __chain: [],\n    __extensions: extensions || [],\n    __required: false,\n    __orgRequire: function __orgRequire(resObj) {\n      resObj = Object.assign({}, resObj);\n      resObj.__required = true;\n      bindAllExtensions(resObj);\n      return resObj;\n    },\n    __extend: function __extend(resObj, ext) {\n      resObj.__extensions.push(ext); // deliberately mutate extensions to work globally\n      bindAllExtensions(resObj);\n    }\n  };\n  // And bind extensions to have the valObj for chaining\n  bindAllExtensions(valObj);\n\n  return valObj;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/validator.js\n// module id = 2\n// module chunks = 0\n//# sourceURL=webpack:///./src/validator.js?")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  name: 'max',\n  handler: function handler(value, max) {\n    if (typeof max !== 'number') {\n      return 'Invalid notation in max. Expected number';\n    }\n    if (value > max) {\n      return 'Too big. Expected max ' + max + '. Got ' + value;\n    }\n    return null;\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/extensions/max.js\n// module id = 3\n// module chunks = 0\n//# sourceURL=webpack:///./src/extensions/max.js?")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  name: 'max',\n  handler: function handler(value, max) {\n    if (typeof max !== 'number') {\n      return 'Invalid notation in max. Expected number';\n    }\n    if (value.length > max) {\n      return 'Too long. Max length ' + max + '. Got ' + value.length;\n    }\n    return null;\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/extensions/max_length.js\n// module id = 4\n// module chunks = 0\n//# sourceURL=webpack:///./src/extensions/max_length.js?")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  name: 'min',\n  handler: function handler(value, min) {\n    if (typeof min !== 'number') {\n      return 'Invalid notation in min. Expected number';\n    }\n    if (value < min) {\n      return 'Too short. Expected min ' + min + '. Got ' + value;\n    }\n    return null;\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/extensions/min.js\n// module id = 5\n// module chunks = 0\n//# sourceURL=webpack:///./src/extensions/min.js?")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  name: 'min',\n  handler: function handler(value, min) {\n    if (typeof min !== 'number') {\n      return 'Invalid notation in min. Expected number';\n    }\n    if (value.length < min) {\n      return 'Too short. Min length ' + min + '. Got ' + value.length;\n    }\n    return null;\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/extensions/min_length.js\n// module id = 6\n// module chunks = 0\n//# sourceURL=webpack:///./src/extensions/min_length.js?")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  name: 'test',\n  handler: function handler(value, callback) {\n    if (typeof callback !== 'function') {\n      return 'Invalid notation in test. Expected function';\n    }\n    return callback(value);\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/extensions/test.js\n// module id = 7\n// module chunks = 0\n//# sourceURL=webpack:///./src/extensions/test.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ArrayOf;\n\nvar _validator = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nfunction ArrayOf(extensions) {\n  return function (typeChecker) {\n    var validate = function validate(key, value) {\n      var type = (0, _util.getType)(value);\n      if (type !== 'array') {\n        return (0, _util.genError)(key, 'Expected array, got ' + type);\n      }\n      var error = void 0;\n      if ((0, _util.isValHandler)(typeChecker) && value.length) {\n        error = value.map(function (v, i) {\n          return (0, _validator.run)(typeChecker, key + '[' + i + ']', v);\n        }).filter(function (v) {\n          return !!v;\n        })[0];\n      } else if (value.length) {\n        var passed = value.find(function (av) {\n          if ((0, _util.is)(value, av)) {\n            return true;\n          }\n          return false;\n        });\n        if (!passed) {\n          error = (0, _util.genError)(key, 'Expected value ' + typeChecker + ', got ' + value);\n        }\n      }\n      return error || null;\n    };\n    return (0, _validator.TypeChecker)(validate, extensions);\n  };\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/types/arrayOf.js\n// module id = 8\n// module chunks = 0\n//# sourceURL=webpack:///./src/types/arrayOf.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Custom;\n\nvar _validator = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nfunction Custom(callback) {\n  return function (callback) {\n    return (0, _validator.TypeChecker)(function (key, value) {\n      if (typeof callback !== 'function') {\n        return (0, _util.genError)('Invalid notation in custom. Expected function');\n      }\n      return callback(value);\n    });\n  };\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/types/custom.js\n// module id = 9\n// module chunks = 0\n//# sourceURL=webpack:///./src/types/custom.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = OneOf;\n\nvar _validator = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nfunction OneOf(extensions) {\n  return function (expectedValues) {\n    var validate = function validate(key, value) {\n      if (!Array.isArray(expectedValues)) {\n        return (0, _util.genError)(key, 'Invalid notation inside oneOf. Expected array');\n      }\n      var passed = expectedValues.find(function (ev) {\n        if ((0, _util.isValHandler)(ev)) {\n          if (!(0, _validator.run)(ev, key, value)) {\n            return true;\n          }\n        } else if ((0, _util.is)(ev, value)) {\n          return true;\n        }\n        return false;\n      });\n      if (!passed) {\n        return (0, _util.genError)(key, 'did not match oneOf values');\n      }\n      return null;\n    };\n    return (0, _validator.TypeChecker)(validate, extensions);\n  };\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/types/oneOf.js\n// module id = 10\n// module chunks = 0\n//# sourceURL=webpack:///./src/types/oneOf.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Primitive;\n\nvar _util = __webpack_require__(1);\n\nvar _validator = __webpack_require__(2);\n\nfunction Primitive(expectedType, extensions) {\n  var validate = function validate(key, value) {\n    var type = (0, _util.getType)(value);\n    if (type !== expectedType) {\n      return (0, _util.genError)(key, 'Expected ' + expectedType + ', got ' + type);\n    }\n    return null;\n  };\n  return (0, _validator.TypeChecker)(validate, extensions);\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/types/primitive.js\n// module id = 11\n// module chunks = 0\n//# sourceURL=webpack:///./src/types/primitive.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = Shape;\n\nvar _validator = __webpack_require__(2);\n\nvar _util = __webpack_require__(1);\n\nfunction Shape(extensions) {\n  return function (shapeTypes) {\n    var validate = function validate(key, value) {\n      if ((typeof shapeTypes === 'undefined' ? 'undefined' : _typeof(shapeTypes)) !== 'object') {\n        return (0, _util.genError)(key, 'Invalid notation inside shape. Expected object');\n      }\n      if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object') {\n        return (0, _util.genError)(key, 'Expected object, got ' + (typeof value === 'undefined' ? 'undefined' : _typeof(value)));\n      }\n\n      var error = Object.entries(shapeTypes).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            oKey = _ref2[0],\n            checker = _ref2[1];\n\n        var oVal = value[oKey];\n        return (0, _validator.run)(checker, key + '.' + oKey, oVal);\n      }).filter(function (v) {\n        return !!v;\n      })[0];\n\n      return error || null;\n    };\n    return (0, _validator.TypeChecker)(validate);\n  };\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/types/shape.js\n// module id = 12\n// module chunks = 0\n//# sourceURL=webpack:///./src/types/shape.js?")}])});